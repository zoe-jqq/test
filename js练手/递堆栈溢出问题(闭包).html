<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>递归内存溢出</title>
		<script type="text/javascript">
			function isEven(num) {
				if (num === 0) {
					return true;
				}

				if (num === 1) {
					return false;
				}

				return isEven(Math.abs(num) - 2);
			}
			console.log(isEven(50000));
			/* 递归堆栈溢出： Maximum call stack size exceeded
			每次执行代码时，都会分配一定尺寸的栈空间（Windows系统中为1M），每次方法调用时都会在栈里储存一定信息（如参数、局部变量、返回值等等），这些信息再少也会占用一定空间，成千上万个此类空间累积起来，自然就超过线程的栈空间了。那么如何解决此类问题？ */

			// 1. 闭包（ 返回值里使用闭包）
			function isEven2(num) {
				if (num === 0) {return true;}
				if (num === 1) {return false;}
				return function() {
					return isEven2(Math.abs(num) - 2);}}
			console.log(isEven2(4)()());//此时每次调用时，返回一个匿名函数，匿名函数执行相关的参数和局部变量将会释放，不会额外增加堆栈大小。
			
			/*2. 优化调用

				
			*/	
		
		</script>
	</head>
	<body>
		<div id="">

		</div>
	</body>
</html>
